# AI ä»£ç†

åœ¨æœ¬è¯¾ç¨‹ä¸­ï¼Œå­¦ä¹ å¦‚ä½•åˆ›å»ºä¸€ä¸ªæ— éœ€æŒç»­äººå·¥å¹²é¢„å°±èƒ½è‡ªè¡Œå†³ç­–å’Œæ‰§è¡Œæ“ä½œçš„ AI å®ä½“ï¼Ÿæ²¡é”™ï¼ŒAI ä»£ç†èƒ½å¤Ÿç‹¬ç«‹å®Œæˆç‰¹å®šä»»åŠ¡ã€‚

---

[![ä»£ç†è§£é‡Šè§†é¢‘](https://img.youtube.com/vi/Btkmw1Bosh0/0.jpg)](https://youtu.be/Btkmw1Bosh0?feature=shared)

_â¬†ï¸ç‚¹å‡»å›¾ç‰‡è§‚çœ‹è§†é¢‘â¬†ï¸_

AI ä»£ç†ä½¿ LLMï¼ˆå¤§è¯­è¨€æ¨¡å‹ï¼‰ä»åŠ©æ‰‹æ¼”å˜ä¸ºèƒ½å¤Ÿä»£è¡¨ç”¨æˆ·é‡‡å–è¡ŒåŠ¨çš„å®ä½“ã€‚ä»£ç†ç”šè‡³å¯ä»¥ä¸å…¶ä»–ä»£ç†äº’åŠ¨ä»¥å®Œæˆä»»åŠ¡ã€‚ä¸€ä¸ªä»£ç†çš„ä¸€äº›å…³é”®ç‰¹æ€§åŒ…æ‹¬ä¸€å®šç¨‹åº¦çš„**è‡ªä¸»æ€§**ï¼Œå…è®¸ä»£ç†æ ¹æ®å…¶ç¼–ç¨‹å‘èµ·è¡ŒåŠ¨ï¼›è¿™è¿›ä¸€æ­¥å¸¦æ¥äº†åŸºäºé¢„å®šä¹‰ç›®æ ‡çš„**å†³ç­–èƒ½åŠ›**ã€‚å®ƒä»¬è¿˜å…·æœ‰**é€‚åº”æ€§**ï¼Œèƒ½å¤Ÿé€šè¿‡å­¦ä¹ å’Œè°ƒæ•´æ¥æå‡æ€§èƒ½ã€‚

æ„å»ºä»£ç†æ—¶éœ€è¦ç‰¢è®°çš„ä¸€ç‚¹æ˜¯ï¼Œå®ƒä»¬çš„ç›®æ ‡åº”è¯¥ä¸“æ³¨äºå•ä¸€ä»»åŠ¡ã€‚ä½ éœ€è¦å°½å¯èƒ½æ˜ç¡®åœ°ç¼©å°å®ƒä»¬çš„ç”¨é€”ã€‚

> ğŸ§‘â€ğŸ«**äº†è§£æ›´å¤š**ï¼šæ·±å…¥äº†è§£ AI ä»£ç†çš„åŸºç¡€çŸ¥è¯†ï¼Œè¯·è®¿é—® [Generative AI for Beginners: AI Agents](https://github.com/microsoft/generative-ai-for-beginners/tree/main/17-ai-agents)ã€‚

## åˆ›å»ºä¸€ä¸ª AI ä»£ç†

ä¸ºäº†åœ¨ .NET ä¸­æ„å»ºä¸€ä¸ª AI ä»£ç†ï¼Œæˆ‘ä»¬å°†å¼•å…¥ä¸€äº›æ–°æ¦‚å¿µã€‚æˆ‘ä»¬ä¼šä½¿ç”¨ä¸€ä¸ªæ–°çš„ SDKï¼Œå¹¶éœ€è¦åœ¨ Azure AI Foundry ä¸­è¿›è¡Œä¸€äº›é¢å¤–çš„è®¾ç½®æ¥å¯åŠ¨é¡¹ç›®ã€‚

> ğŸ§‘â€ğŸ’»**ç¤ºä¾‹ä»£ç **ï¼šæœ¬è¯¾ç¨‹å°†åŸºäº [AgentLabs-01-Simple ç¤ºä¾‹](../../../03-CoreGenerativeAITechniques/src/AgentLabs-01-Simple)è¿›è¡Œå­¦ä¹ ã€‚
>
> æˆ‘ä»¬è¿˜åŒ…å«äº†ä¸€äº›æ›´é«˜çº§çš„ç¤ºä¾‹ï¼Œå¯ä»¥åœ¨ `/src/` æ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°ã€‚ä½ å¯ä»¥æŸ¥çœ‹ [AgentLabs-02-Functions](../../../03-CoreGenerativeAITechniques/src/AgentLabs-02-Functions)ã€[AgentLabs-03-OpenAPIs](../../../03-CoreGenerativeAITechniques/src/AgentLabs-03-OpenAPIs) æˆ– [AgentLabs-03-PythonParksInformationServer](../../../03-CoreGenerativeAITechniques/src/AgentLabs-03-PythonParksInformationServer) çš„ README æ–‡ä»¶äº†è§£æ›´å¤šä¿¡æ¯ã€‚

### Azure AI Agent æœåŠ¡

æˆ‘ä»¬å°†ä»‹ç»ä¸€ä¸ªæ–°çš„ Azure æœåŠ¡ï¼Œå®ƒå°†å¸®åŠ©æˆ‘ä»¬æ„å»ºä»£ç†ï¼Œè¿™ä¸ªæœåŠ¡åç§°ååˆ†è´´åˆ‡ï¼š[Azure AI Agent Service](https://learn.microsoft.com/azure/ai-services/agents/overview)ã€‚

è¦è¿è¡Œæœ¬è¯¾ç¨‹ä¸­åŒ…å«çš„ä»£ç ç¤ºä¾‹ï¼Œä½ éœ€è¦åœ¨ Azure AI Foundry ä¸­è¿›è¡Œä¸€äº›é¢å¤–è®¾ç½®ã€‚å¯ä»¥æŒ‰ç…§[è¿™äº›æ­¥éª¤è®¾ç½®ä¸€ä¸ª**åŸºç¡€ä»£ç†**](https://learn.microsoft.com/azure/ai-services/agents/quickstart?pivots=programming-language-csharp)ã€‚

### Azure AI Projects åº“

ä»£ç†ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼š**LLM**ï¼ˆæ¨¡å‹ï¼‰ã€**çŠ¶æ€**ï¼ˆç±»ä¼¼äºå¯¹è¯ä¸Šä¸‹æ–‡ï¼Œç”¨äºåŸºäºè¿‡å»çš„ç»“æœæŒ‡å¯¼å†³ç­–ï¼‰ä»¥åŠ**å·¥å…·**ï¼ˆç±»ä¼¼äºæˆ‘ä»¬ä¹‹å‰å­¦è¿‡çš„ [å‡½æ•°](./01-lm-completions-functions.md#function-calling)ï¼Œå®ƒä»¬å……å½“æ¨¡å‹ä¸å¤–éƒ¨ç³»ç»Ÿä¹‹é—´çš„æ¡¥æ¢ï¼‰ã€‚

ç†è®ºä¸Šï¼Œä½ å¯ä»¥ç”¨ä¹‹å‰å­¦åˆ°çš„çŸ¥è¯†æ„å»º AI ä»£ç†ã€‚ä½† **Azure AI Projects for .NET** åº“é€šè¿‡æä¾›ä¸€ä¸ªç®€åŒ–å¸¸è§„ä»»åŠ¡çš„ APIï¼Œä½¿å¼€å‘ä»£ç†æ›´åŠ è½»æ¾ã€‚

ä½¿ç”¨ Azure AI Projects åº“æ—¶ï¼Œéœ€è¦ç†è§£å‡ ä¸ªæ¦‚å¿µï¼ˆå®ƒä»¬å¯¹åº”äºç±»ï¼‰ï¼š

- `AgentClient`ï¼šåˆ›å»ºå’Œæ‰˜ç®¡ä»£ç†çš„æ•´ä½“å®¢æˆ·ç«¯ï¼Œç®¡ç†ä»£ç†è¿è¡Œçš„çº¿ç¨‹ï¼Œå¹¶å¤„ç†ä¸äº‘çš„è¿æ¥ã€‚
- `Agent`ï¼šåŒ…å«ä»£ç†æ‰§è¡Œä»»åŠ¡çš„æŒ‡ä»¤ä»¥åŠå®ƒå¯ä»¥è®¿é—®çš„å·¥å…·å®šä¹‰ã€‚
- `ThreadMessage`ï¼šè¿™äº›æ˜¯æ¶ˆæ¯â€”â€”ç±»ä¼¼äºæˆ‘ä»¬ä¹‹å‰å­¦è¿‡çš„æç¤ºâ€”â€”ç”¨äºä¼ é€’ç»™ä»£ç†ã€‚ä»£ç†ä¹Ÿä¼šåˆ›å»º `ThreadMessage` å¯¹è±¡è¿›è¡Œé€šä¿¡ã€‚
- `ThreadRun`ï¼šæ¶ˆæ¯ä¼ é€’ç»™ä»£ç†çš„çº¿ç¨‹ã€‚çº¿ç¨‹å¯åŠ¨åå¯ä»¥æä¾›é¢å¤–çš„æŒ‡ä»¤ï¼Œå¹¶å¯è½®è¯¢å…¶çŠ¶æ€ã€‚

è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹æ¥äº†è§£è¿™äº›æ¦‚å¿µçš„å®é™…åº”ç”¨ï¼

### æ„å»ºä¸€ä¸ªæ•°å­¦ä»£ç†

æˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªä¸“æ³¨äºå•ä¸€ä»»åŠ¡çš„ä»£ç†ï¼Œå®ƒçš„ä½œç”¨æ˜¯å……å½“æ•°å­¦å­¦ç”Ÿçš„å¯¼å¸ˆã€‚å®ƒçš„å”¯ä¸€ç›®æ ‡æ˜¯è§£å†³å¹¶è§£é‡Šç”¨æˆ·æå‡ºçš„æ•°å­¦é—®é¢˜ã€‚

1. é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª `AgentsClient` å¯¹è±¡ï¼Œå®ƒè´Ÿè´£ç®¡ç†ä¸ Azure çš„è¿æ¥ã€ä»£ç†æœ¬èº«ã€çº¿ç¨‹ã€æ¶ˆæ¯ç­‰ã€‚

    ```csharp
    string projectConnectionString = "< YOU GET THIS FROM THE PROJECT IN AI FOUNDRY >";
    AgentsClient client = new(projectConnectionString, new DefaultAzureCredential());
    ```

    ä½ å¯ä»¥åœ¨ AI Foundry ä¸­æ‰“å¼€å·²åˆ›å»ºçš„ Hubï¼Œç„¶åè¿›å…¥é¡¹ç›®ï¼Œæ‰¾åˆ°é¡¹ç›®è¿æ¥å­—ç¬¦ä¸²ã€‚å®ƒä½äºå³ä¾§ã€‚

    ![AI Foundry é¡¹ç›®ä¸»é¡µçš„æˆªå›¾ï¼Œçº¢è‰²æ¡†æ ‡å‡ºé¡¹ç›®è¿æ¥å­—ç¬¦ä¸²](../../../translated_images/project-connection-string.e9005630f6251f18a89cb8c08f54b33bc83e0765f4c4e4d694af2ff447c4dfef.zh.png)

2. æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºå¯¼å¸ˆä»£ç†ã€‚è®°ä½ï¼Œå®ƒåº”è¯¥ä¸“æ³¨äºå•ä¸€ä»»åŠ¡ã€‚
   
    ```csharp
    Agent tutorAgent = (await client.CreateAgentAsync(
    model: "gpt-4o",
    name: "Math Tutor",
    instructions: "You are a personal math tutor. Write and run code to answer math questions.",
    tools: [new CodeInterpreterToolDefinition()])).Value;
    ```

    è¿™é‡Œæœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ã€‚é¦–å…ˆæ˜¯ `tools` parameter. We're creating a `CodeInterpreterToolDefinition` object (that is apart of the **Azure.AI.Projects** SDK) that will allow the agent to create and execute code.

    > ğŸ—’ï¸**Note**: You can create your own tools too. See the [Functions](../../../03-CoreGenerativeAITechniques/src/AgentLabs-02-Functions) to learn more.

    Second note the `instructions` that are being sent along. It's a prompt and we're limiting it to answer math questions. Then last creating the agent is an async operation. That's because it's creating an object within Azure AI Foundry Agents service. So we both `await` the `CreateAgentAsync` function and then grab the `Value` çš„è¿”å›å€¼ç”¨æ¥è·å–å®é™…çš„ `Agent` å¯¹è±¡ã€‚åœ¨ä½¿ç”¨ **Azure.AI.Projects** SDK åˆ›å»ºå¯¹è±¡æ—¶ï¼Œä½ ä¼šå¤šæ¬¡çœ‹åˆ°è¿™ç§æ¨¡å¼ã€‚

3. `AgentThread` æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨äºå¤„ç†ä»£ç†ä¸ç”¨æˆ·ä¹‹é—´çš„é€šä¿¡ã€‚æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å¹¶æ·»åŠ ä¸€ä¸ª `ThreadMessage` åˆ°å…¶ä¸­ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œè¿™æ˜¯ç”¨æˆ·çš„ç¬¬ä¸€ä¸ªé—®é¢˜ã€‚

    ```csharp
    AgentThread thread = (await client.CreateThreadAsync()).Value;

    // Creating the first user message to AN agent - notice how we're putting it on a thread
    ThreadMessage userMessage = (await client.CreateMessageAsync(
        thread.Id,
        MessageRole.User,
        "Hello, I need to solve the equation `3x + 11 = 14`. Can you help me?")
    ).Value;
    ```

    æ³¨æ„ `ThreadMessage` çš„ç±»å‹æ˜¯ `MessageRole.User`ã€‚å¦å¤–ï¼Œæˆ‘ä»¬å¹¶ä¸æ˜¯å°†æ¶ˆæ¯å‘é€ç»™ç‰¹å®šä»£ç†ï¼Œè€Œæ˜¯å°†å…¶æ·»åŠ åˆ°çº¿ç¨‹ä¸­ã€‚

4. æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è®©ä»£ç†æä¾›ä¸€ä¸ªåˆå§‹å“åº”ï¼Œå°†å…¶æ”¾åˆ°çº¿ç¨‹ä¸­å¹¶å¯åŠ¨çº¿ç¨‹ã€‚åœ¨å¯åŠ¨çº¿ç¨‹æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æä¾›åˆå§‹ä»£ç†çš„ ID å’Œä»»ä½•é™„åŠ æŒ‡ä»¤ã€‚

    ```csharp
    ThreadMessage agentMessage =  await client.CreateMessageAsync(
        thread.Id,
        MessageRole.Agent,
        "Please address the user as their name. The user has a basic account, so just share the answer to the question.")
    ).Value;

    ThreadRun run = (await client.CreateRunAsync(
        thread.Id,
        assistantId: agentMathTutor.Id, 
        additionalInstructions: "You are working in FREE TIER EXPERIENCE mode`, every user has premium account for a short period of time. Explain detailed the steps to answer the user questions")
    ).Value;
    ```

5. å‰©ä¸‹çš„å°±æ˜¯æ£€æŸ¥è¿è¡ŒçŠ¶æ€ã€‚

    ```csharp
    do
    {
        await Task.Delay(Timespan.FromMilliseconds(100));
        run = (await client.GetRunAsync(thread.Id, run.Id)).Value;

        Console.WriteLine($"Run Status: {run.Status}");
    }
    while (run.Status == RunStatus.Queued || run.Status == RunStatus.InProgress);
    ```

6. ç„¶åæ˜¾ç¤ºç»“æœä¸­çš„æ¶ˆæ¯ã€‚

    ```csharp
    Response<PageableList<ThreadMessage>> afterRunMessagesResponse = await client.GetMessagesAsync(thread.Id);
    IReadOnlyList<ThreadMessage> messages = afterRunMessagesResponse.Value.Data;

    // sort by creation date
    messages = messages.OrderBy(m => m.CreatedAt).ToList();

    foreach (ThreadMessage msg in messages)
    {
        Console.Write($"{msg.CreatedAt:yyyy-MM-dd HH:mm:ss} - {msg.Role,10}: ");

        foreach (MessageContent contentItem in msg.ContentItems)
        {
            if (contentItem is MessageTextContent textItem)
                Console.Write(textItem.Text);
        }
        Console.WriteLine();
    }
    ```

> ğŸ™‹ **éœ€è¦å¸®åŠ©ï¼Ÿ**ï¼šå¦‚æœé‡åˆ°ä»»ä½•é—®é¢˜ï¼Œè¯·[åœ¨ä»£ç åº“ä¸­æäº¤é—®é¢˜](https://github.com/microsoft/Generative-AI-for-beginners-dotnet/issues/new)ã€‚

æ¥ä¸‹æ¥çš„é€»è¾‘æ­¥éª¤æ˜¯å¼€å§‹ä½¿ç”¨å¤šä¸ªä»£ç†æ¥åˆ›å»ºä¸€ä¸ªè‡ªä¸»ç³»ç»Ÿã€‚ä¸‹ä¸€æ­¥å¯èƒ½æ˜¯åˆ›å»ºä¸€ä¸ªä»£ç†ï¼Œç”¨äºæ£€æŸ¥ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰é«˜çº§è´¦æˆ·ã€‚

## æ€»ç»“

AI ä»£ç†æ˜¯è¶…è¶Šç®€å•èŠå¤©äº¤äº’çš„è‡ªä¸» AI å®ä½“ï¼Œå®ƒä»¬å¯ä»¥ï¼š

- **ç‹¬ç«‹å†³ç­–**ï¼šæ— éœ€æŒç»­äººå·¥è¾“å…¥å³å¯æ‰§è¡Œä»»åŠ¡
- **ä¿æŒä¸Šä¸‹æ–‡**ï¼šä¿å­˜çŠ¶æ€å¹¶è®°ä½å…ˆå‰çš„äº¤äº’
- **ä½¿ç”¨å·¥å…·**ï¼šè®¿é—®å¤–éƒ¨ç³»ç»Ÿå’Œ API å®Œæˆä»»åŠ¡
- **åä½œ**ï¼šä¸å…¶ä»–ä»£ç†åä½œè§£å†³å¤æ‚é—®é¢˜

ä½ è¿˜å­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨ **Azure AI Agents** æœåŠ¡å’Œ **Azure AI Project** SDK æ¥åˆ›å»ºä¸€ä¸ªåŸºç¡€ä»£ç†ã€‚

å¯ä»¥å°†ä»£ç†è§†ä¸ºå…·æœ‰è‡ªä¸»èƒ½åŠ›çš„ AI åŠ©æ‰‹â€”â€”å®ƒä»¬ä¸ä»…ä»…æ˜¯å“åº”ï¼Œè€Œæ˜¯åŸºäºå…¶ç¼–ç¨‹å’Œç›®æ ‡é‡‡å–è¡ŒåŠ¨ã€‚

## æ›´å¤šèµ„æº

- [ä½¿ç”¨ .NET æ„å»ºä¸€ä¸ªæœ€å°åŒ–ä»£ç†](https://learn.microsoft.com/dotnet/ai/quickstarts/quickstart-assistants?pivots=openai)
- [å¤šä»£ç†åè°ƒ](https://techcommunity.microsoft.com/blog/educatordeveloperblog/using-azure-ai-agent-service-with-autogen--semantic-kernel-to-build-a-multi-agen/4363121)
- [è¯­ä¹‰å†…æ ¸ä»£ç†æ¡†æ¶](https://learn.microsoft.com/semantic-kernel/frameworks/agent/?pivots=programming-language-csharp)
- [AI ä»£ç† - åˆå­¦è€…ç”Ÿæˆå¼ AI ç³»åˆ—](https://github.com/microsoft/generative-ai-for-beginners/tree/main/17-ai-agents)

## ä¸‹ä¸€æ­¥

ä½ å·²ç»å–å¾—äº†å¾ˆå¤§è¿›æ­¥ï¼ä»å­¦ä¹ ç®€å•çš„ä¸€æ¬¡æ€§æ–‡æœ¬å®Œæˆåˆ°æ„å»ºä»£ç†ï¼

ğŸ‘‰ [ä¸‹ä¸€è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°ä¸€äº›å®é™…çš„åº”ç”¨ç¤ºä¾‹](../04-PracticalSamples/readme.md)ï¼Œå±•ç¤ºå¦‚ä½•å°†æ‰€æœ‰å†…å®¹ç»“åˆåœ¨ä¸€èµ·ä½¿ç”¨ã€‚

**å…è´£å£°æ˜**ï¼š  
æœ¬æ–‡ä»¶ä½¿ç”¨åŸºäºæœºå™¨çš„äººå·¥æ™ºèƒ½ç¿»è¯‘æœåŠ¡è¿›è¡Œç¿»è¯‘ã€‚å°½ç®¡æˆ‘ä»¬åŠªåŠ›ç¡®ä¿å‡†ç¡®æ€§ï¼Œä½†è¯·æ³¨æ„ï¼Œè‡ªåŠ¨ç¿»è¯‘å¯èƒ½åŒ…å«é”™è¯¯æˆ–ä¸å‡†ç¡®ä¹‹å¤„ã€‚åº”ä»¥åŸæ–‡çš„æ¯è¯­ç‰ˆæœ¬ä½œä¸ºæƒå¨æ¥æºã€‚å¯¹äºå…³é”®ä¿¡æ¯ï¼Œå»ºè®®å¯»æ±‚ä¸“ä¸šçš„äººç±»ç¿»è¯‘æœåŠ¡ã€‚æˆ‘ä»¬å¯¹äºå› ä½¿ç”¨æœ¬ç¿»è¯‘è€Œå¯¼è‡´çš„ä»»ä½•è¯¯è§£æˆ–è¯¯è¯»ä¸æ‰¿æ‹…è´£ä»»ã€‚